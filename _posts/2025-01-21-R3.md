---
title: "R 프로그래밍 정리2"
excerpt: "이 글은 R에서 벡터 연산, 행렬 조작, 배열 생성, 고유값 및 특이값 분해, 선형 방정식 풀이 등 다양한 수학적 연산과 데이터 조작 방법을 코드와 함께 설명합니다."

categories:
  - R
tags:
  - [R, R기초, R프로그래밍, R 프로그래밍 기초]

permalink: /R/R3/

toc: true
toc_sticky: true

date: 2025-01-21
last_modified_at: 2025-01-21
---

# R 프로그래밍 정리2

---

# **R 코드 정리 및 설명**

## **1. 벡터 연산**

### **코드**
```r
a <- c(1,2,4,1,2,4,3,6,7,2,0)
b <- c(1,3,2,3,2,2,1,2,1,1,1)

# 벡터 내적 계산
sum(a * b)               # 요소별 곱의 합
(dotresult <- a %*% b)   # 내적 계산
```

### **설명**
- **벡터 내적**: 두 벡터의 동일 위치 요소를 곱한 후 합산하여 계산합니다.
    - `sum(a * b)`는 요소별 곱의 합을 직접 계산합니다.
    - `%*%` 연산자는 벡터 간 내적을 간단히 수행합니다.

---

## **2. 벡터 크기와 코사인 각도**

### **코드**
```r
# 벡터 크기 계산
anorm <- sqrt(sum(a^2))  # 벡터 a의 크기
bnorm <- sqrt(sum(b^2))  # 벡터 b의 크기

# 코사인 값과 라디안 각도 계산
costheta <- dotresult / (anorm * bnorm) # 코사인 값
radianangle <- acos(costheta)           # 라디안 값

# 라디안을 도(degree)로 변환
install.packages("NISTunits", dependencies = TRUE)
library(NISTunits)
NISTradianTOdeg(radianangle)
```

### **설명**
- **벡터 크기**: 유클리드 거리 공식을 사용하여 벡터의 크기를 계산합니다.
- **코사인 값**: 두 벡터 사이의 코사인 값을 계산합니다.
- **라디안 변환**: `acos` 함수로 구한 라디안 값을 `NISTradianTOdeg` 함수로 도 단위로 변환합니다.

---

## **3. 행렬 생성 및 속성 확인**

### **코드**
```r
# 행렬 생성
(a = matrix(1:8, nrow = 3, ncol = 3, byrow = TRUE)) # 재활용 규칙 적용
matrix(1:9, nrow = 3, ncol = 3, byrow = FALSE)
matrix(1:12, nrow = 3) # 행 개수만 지정

# 행렬 속성 확인
class(a)          # "matrix" 또는 "array"
attributes(a)     # 차원 정보 (dim 등)
dim(a)            # 행렬의 차원 반환
```

### **설명**
- **행렬 생성**:
    - `matrix(data, nrow, ncol)` 함수로 행렬을 생성합니다.
    - `byrow = TRUE`는 데이터를 행 기준으로 채웁니다.
- **행렬 속성 확인**:
    - `class()`는 객체가 행렬인지 확인합니다.
    - `attributes()`는 객체의 속성을 반환합니다.
    - `dim()`은 행렬의 차원을 반환합니다.

---

## **4. 행 이름과 열 이름 지정**

### **코드**
```r
x <- matrix(1:9, nrow = 3, byrow = TRUE)

# 열 이름과 행 이름 설정
colnames(x) <- c("C1", "C2", "C3")
rownames(x) <- c("R1", "R2", "R3")

# 특정 요소 접근
x["R1", "C1"]  # 첫 번째 행 첫 번째 열 요소
x["R1", ]      # 첫 번째 행 전체
```

### **설명**
- **행/열 이름 추가**:
    - `colnames()`와 `rownames()`로 열과 행 이름을 설정할 수 있습니다.
- **특정 요소 접근**:
    - 대괄호 `[행이름, 열이름]`을 사용하여 특정 요소를 선택할 수 있습니다.

---

## **5. 전치행렬과 내적 연산**

### **코드**
```r
x <- matrix(1:12, nrow = 3, ncol = 4)

# 전치행렬 생성
xt <- t(x)

# 행렬 곱 연산 (3x4와 4x3 곱하여 결과는 3x3)
result <- x %*% t(x)

# 첫 번째 행과 첫 번째 열 내적 계산
dot_product <- sum(x[1,] * xt[,1])

# 출력 결과 확인
print(result)
print(dot_product)
```

### **설명**
- **전치행렬**:
    - `t(x)` 함수는 주어진 행렬의 전치행렬을 생성하며 행과 열이 서로 바뀝니다.
- **행렬 곱 연산**:
    - `%*%` 연산자는 두 행렬 간 곱셈을 수행합니다.
- **내적 계산**:
    - 특정 행과 열의 내적은 요소별 곱 후 합산하여 계산됩니다.

---

## **6. 고유값 분해**

### **코드**
```r
mdat <- matrix(seq(20, 4, -2), nrow = 3)

# 고유값 분해 수행
mdatEigen <- eigen(mdat %*% t(mdat))

# 고유벡터와 고유값 확인
mdatEigen$vectors  # 고유벡터 (정규화됨)
mdatEigen$values   # 고유값
```

### **설명**
- 고유값 분해는 정방행렬 또는 대칭행렬을 고유값과 고유벡터로 분해하는 과정입니다.
- R에서 `eigen()` 함수는 고유값과 고유벡터를 반환합니다.

---

## **7. 특이값 분해 (SVD)**

### **코드**
```r
x <- matrix(1:12, nrow=3)

# 특이값 분해 수행
svd_result <- svd(x)

U <- svd_result$u      # 좌측 특이벡터 (직교행렬)
Sigma <- diag(svd_result$d) # 특이값 대각행렬
Vt <- t(svd_result$v)  # 전치된 우측 특이벡터

# 원래 행렬 복원 가능 여부 확인
reconstructed_x <- U %*% Sigma %*% Vt

print(reconstructed_x)
```

### **설명**
- 특이값 분해(SVD)는 비정방행렬을 세 가지 구성 요소로 나눕니다:
    - $$ U $$: 좌측 특이벡터 (직교행렬)
    - $$ \Sigma $$: 대각선에 특이값을 가진 대각행렬
    - $$ V^T $$: 전치된 우측 특이벡터 (직교행렬)
- SVD는 데이터 축소나 차원 축소에 유용하게 사용됩니다.

---

## **8. 선형 방정식 풀이**

### **코드**
```r
# 2X + 3Y = 5
# 3X + 5Y = 6
mdat <- matrix(c(2,3,3,5), nrow = 2, ncol = 2, byrow = TRUE)
c <- c(5,6)
solve(mdat, c) # 역행렬을 이용한 방정식 풀이

# 2x + y + z = 1
# 4x + 3y + 4z = 2
# -4x + 2y + 2z = -6
mat <- matrix(c(2,1,1,4,3,4,-4,2,2), nrow = 3, ncol = 3, byrow = TRUE)
y <- c(1,2,-6)
solve(mat, y) # 다변수 선형 방정식 풀이
```

### **설명**
- `solve(A, b)` 함수는 선형 방정식을 풉니다.
- 첫 번째 예제는 $$2X + 3Y = 5$$와 $$3X + 5Y = 6$$를 해결합니다.
- 두 번째 예제는 세 변수 $$x$$, $$y$$, $$z$$를 포함하는 방정식을 풉니다.

---

## **9. 배열(Array)**

### **코드**
```r
vector1 <- c(5,9,3)
vector2 <- c(10,11,12,13)

# 배열 생성 (4x3 구조)
result <- array(c(vector1, vector2), dim = c(4,3))

# 배열 출력 및 특정 요소 접근 
print(result)         # 전체 배열 출력
print(result[2,3])    # 2행 3열 요소 출력
```

### **설명**
- 배열은 다차원 데이터를 저장하는 구조입니다.
- `array()` 함수를 사용하여 배열을 생성하며, 특정 요소는 `[행번호, 열번호]` 형식으로 접근합니다.

---

## **10. 행렬 묶기와 역행렬 구하기**

### **코드**
```r
# 다음 벡터를 묶어 행렬 생성
a <- c(2, 1, 3, 3)
b <- c(5, 3, 5, 4)
c <- c(6, 5, 9, 6)
d <- c(1, 3, 2, 2)
xyz <- rbind(a, b, c, d)

# 역행렬 계산
res <- solve(xyz)
```

### **설명**
- `rbind()`는 벡터를 행 단위로 묶어 행렬을 생성합니다.
- `solve()`는 정방행렬의 역행렬을 계산합니다. 역행렬은 정방행렬에서만 가능합니다.

---

## **11. 행렬 요소 연산**

### **코드**
```r
X <- matrix(1:4, nrow = 2)
Y <- matrix(5:8, nrow = 2)

# 요소별 연산
X + Y   # 덧셈
X - Y   # 뺄셈
X * Y   # 곱셈 (요소별 곱셈)
X / Y   # 나눗셈 (요소별 나눗셈)

# 행과 열 결합
rbind(X, Y) # 행 결합
cbind(X, Y) # 열 결합

# apply 함수로 연산 수행
apply(X, 1, sum)   # 각 행의 합
apply(X, 2, mean)  # 각 열의 평균
```

### **설명**
- 동일 위치의 요소끼리 연산이 수행됩니다.
- `rbind()`와 `cbind()`는 각각 행과 열 단위로 두 행렬을 결합합니다.
- `apply()` 함수는 특정 차원(행 또는 열)에 대해 함수를 적용합니다.
---

## **12. 배열(Array)**

### **코드**
```r
vector1 <- c(5,9,3)
vector2 <- c(10,11,12,13,14)

# 배열 생성 (4x3x2 구조)
result <- array(c(vector1, vector2), dim = c(4,3,2))

# 배열 출력 및 특정 요소 접근
print(result)         # 전체 배열 출력
print(result[,,2])    # 두 번째 면 출력
print(result[3,,2])   # 두 번째 면의 세 번째 행 출력
```

### **설명**
- 배열은 다차원 데이터를 저장하는 구조입니다.
    - 예: 배열의 차원은 `(행 x 열 x 면)`으로 정의됩니다.
- `array()` 함수는 데이터를 지정된 차원으로 배열합니다.
- 특정 면이나 요소는 대괄호 `[행번호, 열번호, 면번호]`를 사용해 접근할 수 있습니다.

---

위 내용은 빠진 부분을 포함하여 수정된 형태로 작성되었습니다.
## **13. 다차원 배열**

### **코드**
```r
column.names <- c("COL1", "COL2", "COL3")
row.names <- c("ROW1", "ROW2", "ROW3")
matrix.names <- c("Matrix1", "Matrix2", "Matrix3")

# 다차원 배열 생성 (3x3x3 구조)
result <- array(c(11:19), dim = c(3,3,3),
                dimnames = list(row.names,column.names,matrix.names))

# 특정 데이터 추출
print(result[,,2])      # 두 번째 매트릭스 출력
print(result[3,,2])     # 두 번째 매트릭스의 세 번째 행 출력
print(result[1,3,1])    # 첫 번째 매트릭스의 첫 번째 행 세 번째 열 데이터 출력
```

### **설명**
- 다차원 배열은 여러 매트릭스를 포함하는 구조입니다.
- `dimnames`를 사용해 각 차원의 이름을 지정할 수 있습니다.
- 특정 데이터는 `[행번호, 열번호, 면번호]` 형식으로 접근합니다.

---

## **14. 고급 배열 데이터 추출**

### **코드**
```r
# 다양한 데이터 추출 예제

# 두 번째 매트릭스 전체 출력
print(result[,,2])

# 특정 매트릭스의 요소 추출 예시:
print(result[3,,2])     # 두 번째 매트릭스의 세 번째 행 전체
print(result[1:2,,])    # 모든 면에서 첫 번째와 두 번째 행 추출
```

### **설명**
- 대괄호 `[,,]`를 사용해 원하는 차원을 지정하여 데이터를 필터링할 수 있습니다.
- 콜론(`:`)을 사용하면 범위를 지정하여 여러 데이터를 선택할 수 있습니다.

---


